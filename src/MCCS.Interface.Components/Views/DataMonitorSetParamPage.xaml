<UserControl x:Class="MCCS.Interface.Components.Views.DataMonitorSetParamPage"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes" 
             xmlns:b="http://schemas.microsoft.com/xaml/behaviors"
             xmlns:viewModels="clr-namespace:MCCS.Interface.Components.ViewModels"
             xmlns:parameters="clr-namespace:MCCS.Interface.Components.ViewModels.Parameters"
             mc:Ignorable="d" 
             d:DesignHeight="450" d:DesignWidth="800"
             d:DataContext="{d:DesignInstance parameters:DataMonitorSetParamPageViewModel}">
    <!--<b:Interaction.Triggers>
        <b:EventTrigger EventName="Loaded">
            <b:InvokeCommandAction 
                Command="{Binding LoadCommand}" />
        </b:EventTrigger>
    </b:Interaction.Triggers>-->
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="*"></RowDefinition>
            <RowDefinition Height="50"></RowDefinition>
            <RowDefinition Height="100"></RowDefinition>
        </Grid.RowDefinitions>
        <ScrollViewer Grid.Row="0">
            <ItemsControl ItemsSource="{Binding SettingValues}">
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <Border
                            x:Name="Border"
                            Padding="8"
                            BorderBrush="{DynamicResource MaterialDesignDivider}"
                            BorderThickness="1"
                            CornerRadius="5 "
                            Background="Transparent"
                            Margin="0,0,0,5"
                            Cursor="Hand"> 
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="80" />
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="100" />
                                    <RowDefinition Height="100" />
                                    <RowDefinition Height="100" />
                                </Grid.RowDefinitions>
                                <StackPanel Grid.Row="0" Grid.Column="0">
                                    <TextBlock FontSize="16" Text="绑定特定的虚拟通道(未来绑定变量):" />
                                    <ComboBox
                                        FontSize="15"
                                        ItemsSource="{Binding DataContext.PseudoChannels, RelativeSource={RelativeSource AncestorType=ItemsControl}}" 
                                        SelectedItem="{Binding SelectedChannelItem}"
                                        DisplayMemberPath="DisplayName"/>
                                </StackPanel>
                                <StackPanel Grid.Row="1" Grid.Column="0">
                                    <TextBlock FontSize="16" Text="单位:" />
                                    <ComboBox FontSize="15" SelectedIndex="{Binding Unit}">
                                        <ComboBoxItem>mm</ComboBoxItem>
                                        <ComboBoxItem>kN</ComboBoxItem>
                                    </ComboBox>
                                </StackPanel>
                                <StackPanel Grid.Row="2" Grid.Column="0">
                                    <TextBlock FontSize="16" Text="保留小数点后位数:" />
                                    <materialDesign:NumericUpDown Value="{Binding RetainBit}" FontSize="15" Style="{StaticResource MaterialDesignFloatingHintNumericUpDown}" />
                                </StackPanel>
                                <Border Grid.Row="0" Grid.Column="1" Grid.RowSpan="3" 
                                        Margin="15,0,0,0"
                                        BorderThickness="1,0,0,0" BorderBrush="AliceBlue">
                                    <Button Height="Auto" Background="OrangeRed"
                                            Command="{Binding DataContext.DeleteSettingItemCommand, RelativeSource={RelativeSource AncestorType=ItemsControl}}"
                                            CommandParameter="{Binding}">
                                        <materialDesign:PackIcon Width="30" Height="30" Kind="DeleteOutline" />
                                    </Button>
                                </Border>
                            </Grid>
                        </Border>
                        <DataTemplate.Triggers>
                            <Trigger Property="Border.IsMouseOver" Value="True">
                                <Setter
                                    TargetName="Border"
                                    Property="Background"
                                    Value="{DynamicResource MaterialDesignDivider}" />
                            </Trigger>
                        </DataTemplate.Triggers>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
        </ScrollViewer>
        <Button Grid.Row="1" Height="50" Command="{Binding AddDataSettingCommand}">
            <materialDesign:PackIcon Kind="Plus" Height="Auto" />
        </Button>
        <UniformGrid Grid.Row="2" Columns="2">
            <Button Width="80" Content="保存" Command="{Binding SaveCommand}"></Button>
            <Button Width="80" Content="取消" Style="{DynamicResource MaterialDesignOutlinedSecondaryLightButton}"></Button>
        </UniformGrid>
    </Grid>
</UserControl>
